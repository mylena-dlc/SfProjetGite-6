{% extends 'base.html.twig' %}

{% block title %}Galerie photos{% endblock %}

{% block meta_description %} {{ description }} {% endblock %}

{% block body %}

{% for flash_message in app.flashes('error') %}
        <script>
            Swal.fire({
                icon: "error",
                title: "Erreur",
                text: "{{ flash_message|raw }}",
            });
        </script>
{% endfor %}
{% for flash_message in app.flashes('success') %}
        <script>
            Swal.fire({
                icon: "success",
                title: "Succ√®s",
                text: "{{ flash_message|raw }}",
            });
        </script>
{% endfor %}

    <div class="title gite-title center">
          <h1> {{ category }} </h1>
    </div>
    
    <div class="breadcrumb">
        <a href="{{ path('app_home') ~ '#galerie' }}"><button class="btn">Retour</button></a>
    </div>

    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImg">
        <div class="modal-prev" onclick="changeModalImage(-1)"></div> 
        <div class="modal-next" onclick="changeModalImage(1)"></div> 
    </div>

    <div id="carouselModal">
        <div class="gallery">
            {% for picture in pictures %}
                <div class="gallery-item"> 
                    <img src="{{ asset(picture.url) }}" alt="{{ picture.description }}" class="modal-trigger" onclick="openModal('{{ asset(picture.url) }}')">
                </div>

                {% if is_granted('ROLE_ADMIN') %}
                    <button class="btn delete cardBtn"><a href="{{ path('delete_picture', {'id': category.id, 'id_picture': picture.id }) }}" class="cardLink"><i class="fa-solid fa-trash-can"></i></a></button>
                    <button class="btn delete cardBtn"><a href="{{ path('edit_picture', {'category_id': category.id, 'id': picture.id }) }}" class="cardLink"><i class="fa-solid fa-pen-to-square"></i></a></button>
                {% endif %}
            {% endfor %}
        </div>
    </div>

{% endblock %}