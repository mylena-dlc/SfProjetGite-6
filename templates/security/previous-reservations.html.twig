{% extends 'base.html.twig' %}

{% block title %}Mes anciens séjours{% endblock %}

{% block body %}

        <div class="title gite-title center">
            <h2>Mes anciens séjour</h2>
        </div>

        <div class="resaContaint">
                  
               
                  
 {% if previousReservations is not empty %}
<table class="tableGite">
        <thead>
            <tr>
                <th>
                   
                </th>
                <th>Référence de la réservation</th>  
                <th>Date de réservation</th> 
                <th>Date d'arrivée</th>
                <th>Date de départ</th>
                <th>Nombre d'adulte(s)</th>
                <th>Nombre d'enfant(s)</th>
                <th>Prix total</th>
                <th>Détails</th>
            </tr>
        </thead>
        <tbody>
             {% for previousReservation in previousReservations %}
            <tr>
                <td>
                    {# Si l'utilisateur connecté peut écrire un avis, alors on affiche le bouton #}
                    {% if app.user.canWriteReview(previousReservation) and previousReservation.departureDate|date('U') < 'now'|date('U') %}
                        <button class="btn btnReview"><a href="{{ path('app_write_review', {'reservation_id': previousReservation.id}) }}">Écrire un avis</a></button>
                    {% endif %}
                </td>

                <td>{{ previousReservation.reference }}</td>
                <td>{{ previousReservation.reservationDate|date('d-m-Y') }}</td>
                <td>{{ previousReservation.arrivalDate|date('d-m-Y') }}</td>
                <td>{{ previousReservation.departureDate|date('d-m-Y') }}</td>
                <td>{{ previousReservation.numberAdult }}</td>
                <td>{{ previousReservation.numberKid }}</td>
                <td>{{ previousReservation.totalPrice }} €</td>
                <td><a href="{{ path('show_reservation', {'id': previousReservation.id}) }}"><i class="fa-solid fa-circle-info"></i></a></td>
            </tr>   
               {% endfor %}
        </tbody>
    </table>        


            {% else %}
                <p class="profilResa">Vous n'avez aucune réservation.</p>
            {% endif %}
        </div>

    </div>

    </div>

{% endblock %}